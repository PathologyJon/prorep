<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prostate Pathology Reporter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <h1>Prostate Pathology Reporter</h1>

    <div class="field-group full-width">
        <label>Is cancer present?</label>
        <select id="isMalignant" class="report-field">
            <option value="no">No (Benign)</option>
            <option value="yes">Yes (Malignant)</option>
        </select>
    </div>

    <div id="benign-config" class="conditional-box full-width">
        <label>Number of benign parts</label>
        <input type="number" id="benignPartCount" class="report-field" value="1" min="1" max="26">
    </div>

    <div id="malignant-ui" style="display: none;">
        <div class="input-grid">
            <div class="field-group">
                <label>Cancer type</label>
                <select id="cancerType" class="report-field">
                    <option value="Acinar adenocarcinoma">Acinar adenocarcinoma</option>
                    <option value="Prostatic ductal adenocarcinoma">Prostatic ductal adenocarcinoma</option>
                </select>
            </div>
            <div class="field-group">
                <label>IHC confirmed?</label>
                <select id="ihc" class="report-field">
                    <option value="no">No</option>
                    <option value="yes">Yes</option>
                </select>
            </div>
            <div class="field-group">
                <label>Overall Gleason score</label>
                <select id="gleason" class="report-field">
                    <option value="">-- Select --</option>
                    <option value="3+3=6">3+3=6</option>
                    <option value="3+4=7">3+4=7</option>
                    <option value="4+3=7">4+3=7</option>
                    <option value="4+4=8">4+4=8</option>
                    <option value="3+5=8">3+5=8</option>
                    <option value="5+3=8">5+3=8</option>
                    <option value="4+5=9">4+5=9</option>
                    <option value="5+4=9">5+4=9</option>
                    <option value="5+5=10">5+5=10</option>
                </select>
            </div>
            <div class="field-group">
                <label>Overall Prognostic grade group</label>
                <input type="text" id="gradeGroup" class="report-field" readonly>
            </div>

            <div id="g7-details" class="conditional-box full-width">
                <div class="field-group">
                    <label>Cribriform morphology</label>
                    <select id="cribriform" class="report-field">
                        <option value="Not identified">No</option>
                        <option value="Focal">Focal</option>
                        <option value="Extensive">Extensive</option>
                    </select>
                </div>
                <div class="field-group">
                    <label>Overall % pattern 4</label>
                    <input type="text" id="percent4" class="report-field" placeholder="e.g. 10 or 20-30">
                </div>
            </div>

            <div class="field-group full-width">
                <label>Tumour site</label>
                <input type="text" id="tumourSite" class="report-field" readonly placeholder="Auto-calculated from parts">
            </div>

            <div class="field-group">
                <div class="label-row">
                    <label>Total cores involved (Right)</label>
                    <button type="button" class="btn-calc" onclick="calcSide('right')">Auto Calculate</button>
                </div>
                <input type="text" id="rightSummary" class="report-field">
            </div>
            <div class="field-group">
                <div class="label-row">
                    <label>Total cores involved (Left)</label>
                    <button type="button" class="btn-calc" onclick="calcSide('left')">Auto Calculate</button>
                </div>
                <input type="text" id="leftSummary" class="report-field">
            </div>
            <div class="field-group full-width">
                <div class="label-row">
                    <label>Tumour length of most involved core (mm)</label>
                    <button type="button" class="btn-calc" onclick="calcMaxLen()">Auto Calculate</button>
                </div>
                <input type="number" id="mostInvolvedLen" class="report-field" step="0.1">
            </div>

            <div class="field-group">
                <label>Perineural invasion</label>
                <select id="pni" class="report-field">
                    <option value="Absent">Absent</option>
                    <option value="Present right side">Present right side</option>
                    <option value="Present left side">Present left side</option>
                    <option value="Present both sides">Present both sides</option>
                    <option value="Present">Present</option>
                </select>
            </div>
            <div class="field-group">
                <label>Extra prostatic invasion</label>
                <select id="epi" class="report-field">
                    <option value="Absent">Absent</option>
                    <option value="Present right side">Present right side</option>
                    <option value="Present left side">Present left side</option>
                    <option value="Present both sides">Present both sides</option>
                    <option value="Present">Present</option>
                </select>
            </div>
        </div>

        <div class="specimen-section">
            <div class="section-header">
            <h3>Specimen details</h3>
            </div>
    
    <div id="parts-container"></div>

    <div class="add-button-container">
        <button type="button" onclick="addPart()" class="btn-add">+ Add Part</button>
    </div>
</div>
    </div>

    <div class="field-group full-width" style="margin-top: 20px;">
    <label>Consultant Name</label>
    <div class="flex-row">
        <input type="text" id="consultantName" class="report-field" placeholder="e.g. Smith" style="flex-grow: 1;">
        <button type="button" onclick="saveConsultant()" class="btn-calc" style="padding: 10px;">Save Default</button>
    </div>


<div class="output-container">
    </div>
    <div class="output-container">
        <h3>Report preview</h3>
        <div id="report-output"></div>
        <div class="button-row">
            <button onclick="copyToClipboard()" id="copyBtn" class="btn-main">Copy report</button>
            <!-- <button onclick="copyCSVToClipboard()" id="csvBtn" class="btn-secondary">Copy as CSV</button> -->
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
